5.4 routing among the ISPs: BGP

### Inter-AS routing: BGP

BGP(Border Gateway Protocol):

현재 인터넷에서 사용되는 EGP는 BGP밖에 없다. 버전 4가 사용 된다.

BGP-4 [RFC 1771]
 • Support for Classless Interdomain Routing (CIDR)

- A <u>**Policy-based**</u> routing protocol

  BGP는 policy가 제일 중요하다.  

  AS와 AS간에 policy를 가장 우선 적으로 하기 때문에 개념은 쉽지만..실제로 configuration(배열, 배치, 환경설정) 하기는 어렵다.

- Path-vector concept를 사용 한다. 

  일종의 Distance Vector protocols로, loop를 막기위해 AS-PATH를 포함 시킨다

  AS-PATH? 어떤 목적지를 가는 는데 어떤 AS를 거쳐서 갔는지에 대한 정보. 같은게 두개가 나오면 루프라고 볼 수 있는 것이다.

  

BGP는 크게 두가지 종류가 있다.

**eBGP:** 다른 인접한 AS와 연결하여 정보를 연결 할때 (각각 AS의 Gateway끼리) 

**iBGP:** Gate way가 포함된 다른 AS에 정보를 전달할 경우에 쓰는 메커니즘(즉 내부에서 쓰이는 것)

= 주로 policy 와 reachability information을 통해 좋은 경로를 결정한다.

![image-20201116224420275](/Users/juhui/Library/Application Support/typora-user-images/image-20201116224420275.png)

:star: Gateway router는 eBGP, iBGP 둘 다 될 수 있다.



BGP는 TCP 연결을 항상 열어 놓는다. **path vector**를 사용! 

(:.. 연결을 어떻게 서로 해주는지 설명을 해야한다 )



항상 policy가장 중요하다. 

### GBP Route Selection

1. Local preference value attrivute: policy decision (policy가 가장 중요하다)
2. The shortest AS-PATH
3. The closest NEXT-HOP router: hot potato -> 그냥 가장 가까운 것을 고르는 것(면밀히 살펴보지 않음) 빨리 결정
4. 다른 것들 도 있을 수 있다.











