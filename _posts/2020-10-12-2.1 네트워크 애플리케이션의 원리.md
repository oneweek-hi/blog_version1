---
layout: post
title:  "2.1 네트워크 애플리케이션의 원리"
date:   2020-10-12T14:25:52-05:00
author: one-weekhi
categories: Network
tags:   Network, client server architecturem, p2p, UDP, TCP
cover:  "/assets/instacode.png"
---


네트워크 애플리케이션의 개발의 중심은 다른 종단 시스템에서 동작하고 네트워크를 통해 서로 통신하는 프로그램을 만드는 것이다. 



## 2.1.1 네트워크 애플리케이션 구조

애플리케이션 구조(application architecture)는 애플리케이션 개발자에 의해 설계되고 애플리케이션이 다양한 종단 시스템에서 어떻게 조직되어야 하는지를 지시 함.

![2.1 네트워크 애플리케이션의 원리_1](./picture/2.1 네트워크 애플리케이션의 원리_1.png)

#### 1. 클라이언트-서버 구조(client server architecture)

- 항상 켜지있는 호스트를 서버(server)라고 하고, 이 서버는 클라이언트(client)라는 다른 많은 호스트의 요청을 처리한다.

- 이 구조에서 클라이언트는 서로 직접적으로 통신하지 않는다. 

- 서버는 고정 ip주소를 갖는다.

- 서버는 항상 동작 하고 있기 때문에, 클라이언트가 서버 주소로 패킷을 보내서 서버에 연결하는 방식이다.

- 서버로 너무 많은 요청이 오면 다 처리 할 수도 없을 수 있기 때문에, 데이터 센터(data center)가 강력한 가상 서버를 만드는 데 흔히 사용 된다. 

#### 2.P2P 구조

- 항상 켜져있는 기반 구조 서버에 최소로 의존(혹은 전혀 의존 하지 않는다. ), 대신 peer라는 간헐적으로 연결된 호스트 쌍이 직접 통신 하도록 한다. 
- 각각의 피어는 사용자들이 제공하는 데스크톱과 랩탑이다. 대부분 가정, 대학 그리고 사무실에 존재한다.
- 특정 서버를 사용하지 않고 피어가 통신하기 때문에 peer to peer라고 한다. 
- 자가확장성(self-scalability)가 있다. 
- 상당한 서버 기반 구조와 대역폭을 요구하지 않기 때문에 비용이 효율적이다.

#### 3.하이브리드 구조

- 위의 구조를 결합한 구조



## 2.1.2 프로세스 간 통신

네트워크 간에 직접적으로 통신하는 것은 프로그램이 아니라 프로세스(process)이다. 프로세스는 종단 시스템에서 실행되는 프로그램이다. 2개의 다른 종단 시스템에서 프로세스는 컴퓨터 네트워크를 통한 메시지(message) 교환으로 서로 통신한다. 송신 프로세스는 메세지를 만들어서 네트워크로 보내고, 수신 프로세스는 메시지를 받고 역으로 메세지를 보내는 방식으로 통신한다.

- 클라이언트 서버 구조 에서는 클라이언트와 서버가 정해져 있다.
- P2P구조에는 둘다 가능하다. 파일을 올리는 피어를 서버라고 하고 받는 경우를 클라이언트라고 한다.



#### 프로세스와 컴퓨터 네트워크 사이의 인터페이스

프로세스는 소켓(socket)을 통해 네트워크로 메시지를 보내고 받는다. 즉 프로세스는 집, 소켓은 출입구로 비유된다.

애플리케이션 개발자는 소켓의 애플리 케이션 계층에 대한 모든 통제권을 갖지만, 소캣의 트랜스포트 계층에 대한 통제권을 거의 가지지 못함

- 트랜스포트 프로토콜 선택 
- 최대 버퍼와 최대 세그먼크 크기와 같은 약간의 트랜스포트 계층 매개변수의 설정

만 가능하다.



#### 프로세스 주소 배정

프로세스를 전달하기 위해 수신 프로세스의 주소를 가지고 있어야 한다. 

**1) 호스트 주소: IP 주소**

**2) 그 목적지 호스트 내의 수신 프로세스 명시하는 식별자: 포트 번호(port number)**

​				자주 쓰이는 것은 well-known port number로 잘 알려져 있다. (Ex 웹서버: 80, 메일서버(SMTP):25)

 

## 2.1.3 애플리케이션이 이용 가능한 트랜스포트 서비스

#### 신뢰적 데이터 전송

패킷들은 컴퓨터 네트워크 내에서 손실이 될 수 있다. Ex) 라우터의 버퍼에서 오버플로우(overflow)되어서 패킷 손실, 패킷의 비트가 잘못되면 호스트 혹은 라우터에 의해 버려질 수 있다. 그래서 정보를 올바르고 완전하게 전송하기 위해 프로토콜이 보장된 전송 서비스를 제공하는 것이 신뢰적 데이터 전송이다.

트랜스포트 계층 프로토콜이 애플리케이션에 서비스를 제공할 때, 송신 프로세스는 데이터를 소켓으로 보내고 그 데이터가 오류가 없이 수신 프로세스에 도착할 것이라고 확신한다. 만약 트랜스포트 계층 프로토콜이 신뢰적 데이터 전송을 제공하지 않을 때 송신 프로세스가 보낸 데이터는 수신 프로세스에 전혀 도착하지 않을 수 있다. 하지만, 실시간 오디오, 비디오가 경우는 손실이 허용될 수 있있다.

#### 처리량

대역폭 민감 어플리케이션(bandwidth-sensitive application)은 처리율 요구 사항을 갖는 애플리케이션이다. 처리속도가 너무 늦으면 인터넷 전화나 애플리케이션에는 전혀 소용이 없기 때문이다.

탄력적 애플리케이션(elastic application)은 가용한 처리율을 많으면 많은대로 적으면 적은 대로 이용하는 애플리케이션이다. ex) 전자메일, 파일 전송, 웹 전송 등

#### 시간

트랜스포트 계층 프로토콜은 시간 보장(timing guarantee)을 제공할 수 있다. 인터넷 전화, 가상환경, 원격 회의, 멀티플레이어 게임등에서 중요한 부분이다.

#### 보안

애플리케이션에 하나 이상의 보안 서비스를 제공 할 수 있다.

 송신 호스트에서 트랜스포트 프로토콜을 송신 프로세스가 전송하는 모든 데이터을 암호화 룻 소 이쏙, 수신 호스트에서 트랜스포트 프로토콜을 그 데이터를 수신프로세스에 전달하기 전에 데이터의 암호를 해독 할 수 있다.



## 2.1.4 인터넷 전송 프로토콜이 제공하는 서비스

#### TCP(Transmission Control Protocol) 

- 연결지향형 서비스: 계층 메세지를 전송하기 전에 클라이언트와 서버가 서로 전송 제어 정보를 교환 하도로고 한다.(핸드 쉐이킹 과정) => 이 단계를 지나면, TCP 연결이 두 프로세스의 소켓 사이에 존재한한다고 이야기 한다.

  -양쪽 프로세스가 서로에게 메세지를 보낼 수 있기 때문에 전 이중(full-duplex) 연결 이라고 한다. 

-  신뢰적인 데이터 전송 서비스 : 모든 데이터를 오류 없이 올바른 순서로 전달 하는 것

  TCP는 애플리케이션의 한쪽이 바이트 스트림을 소켓으로 전달하면 그 바이트 스트림을 손실하거나 중복되지 않게 소켓으로 전달한다.



#### UDP(User Datagram Protocol)

- 최소의 서비스 모델을 가진 간단한 전송 프로토콜이다. UDP는 비 연결형임으로 핸드셰이킹이 필요하지 않다. 
- 비신뢰적인 데이터 전송 서비스를 제공한다.=> 그 메시지가 수신 소켓에 도착하는 것을 보장하지 않는다. 게다가 수신 소켓에 도착하는 메시지들의 순서가 뒤 바뀔 수 있다. 
- 또한 혼잡제어 방식을 포함하지 않는다. 따라서 UDP의 송친 측은 데이터를 원하는 속도로 하위 계층(네트워크 계층)에다가 보낼 수 있다.

![2.1 네트워크 애플리케이션의 원리_2](./picture/2.1 네트워크 애플리케이션의 원리_2.png)



보통 TCP로 사용을 하지만, 인터넷 전화 응용은  보통 패킷 손실을 허용하지만 효율성을 위해 최소의 전송속도를 필요로 하기 때문에, 인터넷 전화 응용 개발자들을 일반적으로 UDP를 사용하기를 선호한다 

=> 이렇게 하면 TCP의 혼잡제어 방식과 패킷 오버해드(overhead)를 회피 할 수 있다. 하지만 많은 방화벽들이 UDP 트래픽을 차단하도록 설정 되있기 때문에, 실패할 경우 TCP를 사용하도록 설계해야 한다. 



## 2.1.5 애플리케이션 계층 프로토콜

:다른 종단 시스템에서 실행되는 애플리케이션 프로세스가 서로 메세지 보내는 방법을 정의한 것

- 교환 메시지 타입(ex: 요청 메시지와 응답 메시지)

- 여러 메시지 타입의 문법 (ex: 메세지 내부의 필드와 필드 간의 구별 방법)

- 필드의 의미, 즉 필드에 있는 정보의 의미

- 언제, 어떻게 프로세스가 메시지를 전송하고 메시지에 응답하는지 결정하는 규칙

  

여러 애플리케이션 계층 프로토콜은 RFC에 명시되어 있으므로 공중 도메인 (pulic domain)에서 찾을 수 있지만, 스카이프와 같이 독점(비개방적) 프로토콜은 공중 도메인에서 구할 수 없다. 

네트워크 애플리케이션과 애플리케이션 계층 프로토콜을 구별하는 것은 중요하다. 애플리케이션 계층 프로토콜은 애플리케이션의 한 요소일 뿐이다. HTTP, SMTP(전자메일) 애플리케이션도 결국 애플리케이션의 한 요소(하지만 중요한 요소)일 뿐이다. 



