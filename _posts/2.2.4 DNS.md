### 2.4 DNS - 인터넷의 디렉터리 서비스

## 2.4.1 DNS가 제공하는 서비스

#### DNS

1) DNS 서버들의 계층 구조로 구현된 분산 데이터 베이스이고, 

2) 호스트가 분산 데이터베이스로 질의 하도록 허락하는 애플리케이션 계층 프로토콜이다. 

주로 BIND소프트웨어 수행하는 유닉스 컴퓨터이다. DNS 프로토콜은 UDP상에서 수행되고 포트 번호는 53을 이용한다.

다른 애플리케이션 프로토콜들이 HTTP, SMTP, FTP 등 사용자가 제공한 호스트 네임을 IP주소로 변환하기 위해 이용한다.

즉, DNS를 사용하는 인터넷 애플리케이션에게 추가 지연을 준다는 것을 볼 수 있다. 하지만 다행스럽게도, 다음 논의하는 것처럼 원하는 IP 주소는 "가까운" DNS 서버에 cache되어 있어서 평균 DNS 지연 뿐 아니라 DNS 네트워크 트래픽 감소에도 도움을 준다.

추가 서비스

- 호스트 엘리어싱(host aliasing): 복잡한 호스트 네임을 가진 호스트는 하나 이상의 별명을 가질 수 있다.

- 메일 서버 엘리어싱(mail server aliasing)

- 부하 분산: DNS는 중복 웨베 서버 같은 여러 중복 서버사이에 부하를 분산하기 위해서도 사용되고 있다.

  

## 2.4.2 DNS 동작 원리 개요

사용자의 호스트에서 실행되는 어떤 애플리케이션(웹 프라우저나 메일 리더)이 호스트 네임을 IP주소로 변환시킨다고 가정하자!

1) 해당 애플리케이션은 변환될 호스트 네임을 명시하여 DNS측의 클라이언트를 호출할 것이다. 

2) 사용자 호스트의 DNS는 네트워크에 질의 메세지를 보낸다.(모든 DNS 질의 응답과 메세지는 포트 53의 UDP 데이터 그램으로 보내진다.)

3) 수 mesc에서 수 sec의 지연 후에 사용자 호스트의 DNS는 요청한 매핑에 해당하는 DNS응답 메세지를 받는다.

4) 이제 이 매핑은 호출한 애플리케이션으로 전달 된다. 

이러한 방식으로 DNS가 작동한다.



#### 분산계층 데이터 베이스

확장성 문제를 다루기 위해 DNS는 많은 서버를 이용하고 이들을 계층 형태로 구성하며 전 세계에 분산시킨다.

(계층 사진)

루트 DNS 서버: 인터넷에는  400개 이상의 루트 DNS서버가 있는데, 대부분 북미 지역에 위치한다. 루트 네임 서버들은 13개의 다른 기관에서 관리된다.

최상위 레벨 도메인(TLD) 서버: com, org, net, edu 같은 상위 레벨 도메인과 kr, uk, fr, ca, jp 같은 모든 국가의 상위 레벨 도메인에 대한 TLD서버(또는 서버 클러스터)가 있다. TLD 서버들은 책임 DNS 서버들에 대한 IP주소들을 제공한다.

책임 DNS 서버: 인터넷에서 접근하기 쉬운 호스트(예: 웹서버와 메일 서버)를 가진 모든 기관은 호스트 네임을 IP주소로  매핑하는 공개적인 DNS 레코드를 제공해야 한다. 대부분의 대학과 큰 기업들은 자신의 기본 책임 DNS서버와 보조 책임 DNS서버를 유지하고 구현한다. 

로컬 DNS서버는 서버들의 계층구조에는 엄격하게 속하지는 않지만, DNS서버의 구조의 중심에 있다. ISP들은 로컬 DNS를 갖는다. 호스트가 ISP에 연결될 때, 그 ISP는 로컬 DNS 서버로 부터 IP 주소를 호스트에게 제공한다. 

(사진)



#### DNS 캐싱

DNS는 지연 성능 향상과 네트워크 DNS 메시지 수를 줄이기 위해 캐싱을 사용한다. 질의 사슬에서 DNS 서버가 DNS 응답을 받았을 때(예: 호스트 네임을 IP 주소로 매핑하기) 그것을 로컬 메모리에 응답에 대한 정보를 저장 할 수 있다. 

즉 로컬 DNS서버가 임의의 DNS서버로 부터 응답을 받을 때마다 포함된 정보를 저장하고 있다가, 다른 호스트 네임으로 부터 같은 질의가 DNS 서버로 도착한다면, DNS 서버는 호스트 네임에 대한 책임이 없을 때 초자 원하는 IP 주소를 제공 할 수 있게 된다!



